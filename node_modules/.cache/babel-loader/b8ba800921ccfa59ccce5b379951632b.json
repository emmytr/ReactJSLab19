{"ast":null,"code":"var _jsxFileName = \"/Users/nus/Documents/Study/NU_Funix/React/ASM/Assignment 02 (Starter Code)/src/pages/MovieDetail/MovieDetails.jsx\";\nimport React, { useState, useEffect } from 'react';\nimport YouTube from 'react-youtube';\nimport { useParams, useLocation } from 'react-router-dom'; // Import useParams to get movieId from URL\nimport styles from './movieDetails.module.css';\nconst API_BASE_URL = 'https://api.themoviedb.org/3';\nconst API_KEY = 'a090b75e1744dd94d481ba67ad26903e';\nconst opts = {\n  height: '400',\n  width: '100%',\n  playerVars: {\n    autoplay: 0\n  }\n};\nfunction MovieDetails() {\n  const {\n    movieId\n  } = useParams(); // Get the movieId from the URL\n  const {\n    state\n  } = useLocation(); // Get the passed state, including category\n  const [movie, setMovie] = useState(null); // Store the movie details\n  const [videoKey, setVideoKey] = useState(null); // Store the YouTube video key\n  const [sameGenreMovies, setSameGenreMovies] = useState([]); // Movies from the same genre\n\n  useEffect(() => {\n    // Fetch movie details based on movieId\n    async function fetchMovieDetails() {\n      const response = await fetch(`${API_BASE_URL}/movie/${movieId}?api_key=${API_KEY}&language=en-US`);\n      const data = await response.json();\n      setMovie(data);\n\n      // Fetch movies from the same genre after getting movie details\n      if (data.genres && data.genres.length > 0) {\n        const genreId = data.genres[0].id; // Use the first genre ID\n        fetchSameGenreMovies(genreId);\n      }\n    }\n\n    // Fetch movie trailer or teaser\n    async function fetchMovieVideo() {\n      const response = await fetch(`${API_BASE_URL}/movie/${movieId}/videos?api_key=${API_KEY}`);\n      const data = await response.json();\n      const trailer = data.results.find(video => video.site === 'YouTube' && video.type === 'Trailer');\n      const teaser = data.results.find(video => video.site === 'YouTube' && video.type === 'Teaser');\n      setVideoKey(trailer ? trailer.key : teaser ? teaser.key : null);\n    }\n\n    // Fetch movies with the same genre\n    async function fetchSameGenreMovies(genreId) {\n      const response = await fetch(`${API_BASE_URL}/discover/movie?api_key=${API_KEY}&with_genres=${genreId}`);\n      const data = await response.json();\n      setSameGenreMovies(data.results);\n    }\n    fetchMovieDetails();\n    fetchMovieVideo();\n  }, [movieId]); // Re-run this effect when movieId changes\n\n  if (!movie) return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 24\n    }\n  }, \"Loading...\");\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.group,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 17\n    }\n  }, {\n    category\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.movieContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 17\n    }\n  }, sameGenreMovies.map(sameGenreMovie => /*#__PURE__*/React.createElement(\"div\", {\n    key: sameGenreMovie.id,\n    className: styles.movieItem,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: `https://image.tmdb.org/t/p/w200${sameGenreMovie.backdrop_path}`,\n    alt: sameGenreMovie.title || sameGenreMovie.name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 29\n    }\n  }))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.movieDetails,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.movieContent,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 21\n    }\n  }, movie.name || movie.title), /*#__PURE__*/React.createElement(\"hr\", {\n    className: styles.line,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 24\n    }\n  }, \"Release Date:\"), \" \", movie.release_date), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 24\n    }\n  }, \"Rating:\"), \" \", movie.vote_average), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 21\n    }\n  }, movie.overview)), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.movieTrailer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.videoContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 21\n    }\n  }, videoKey ? /*#__PURE__*/React.createElement(YouTube, {\n    videoId: videoKey,\n    opts: opts,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 29\n    }\n  }) : /*#__PURE__*/React.createElement(\"img\", {\n    src: `https://image.tmdb.org/t/p/original${movie.backdrop_path}`,\n    alt: movie.name,\n    className: styles.movieBackdrop,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 29\n    }\n  })))));\n}\nexport default MovieDetails;","map":{"version":3,"names":["React","useState","useEffect","YouTube","useParams","useLocation","styles","API_BASE_URL","API_KEY","opts","height","width","playerVars","autoplay","MovieDetails","movieId","state","movie","setMovie","videoKey","setVideoKey","sameGenreMovies","setSameGenreMovies","fetchMovieDetails","response","fetch","data","json","genres","length","genreId","id","fetchSameGenreMovies","fetchMovieVideo","trailer","results","find","video","site","type","teaser","key","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","className","group","category","movieContainer","map","sameGenreMovie","movieItem","src","backdrop_path","alt","title","name","movieDetails","movieContent","line","release_date","vote_average","overview","movieTrailer","videoContainer","videoId","movieBackdrop"],"sources":["/Users/nus/Documents/Study/NU_Funix/React/ASM/Assignment 02 (Starter Code)/src/pages/MovieDetail/MovieDetails.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport YouTube from 'react-youtube';\nimport { useParams, useLocation } from 'react-router-dom';  // Import useParams to get movieId from URL\nimport styles from './movieDetails.module.css';\n\n\n\nconst API_BASE_URL = 'https://api.themoviedb.org/3';\nconst API_KEY = 'a090b75e1744dd94d481ba67ad26903e';\n\nconst opts = {\n    height: '400',\n    width: '100%',\n    playerVars: {\n        autoplay: 0,\n    },\n};\n\nfunction MovieDetails() {\n    const { movieId } = useParams();  // Get the movieId from the URL\n    const { state } = useLocation(); // Get the passed state, including category\n    const [movie, setMovie] = useState(null);  // Store the movie details\n    const [videoKey, setVideoKey] = useState(null);  // Store the YouTube video key\n    const [sameGenreMovies, setSameGenreMovies] = useState([]);  // Movies from the same genre\n\n    useEffect(() => {\n        // Fetch movie details based on movieId\n        async function fetchMovieDetails() {\n            const response = await fetch(`${API_BASE_URL}/movie/${movieId}?api_key=${API_KEY}&language=en-US`);\n            const data = await response.json();\n            setMovie(data);\n\n            // Fetch movies from the same genre after getting movie details\n            if (data.genres && data.genres.length > 0) {\n                const genreId = data.genres[0].id;  // Use the first genre ID\n                fetchSameGenreMovies(genreId);\n            }\n        }\n\n\n        // Fetch movie trailer or teaser\n        async function fetchMovieVideo() {\n            const response = await fetch(`${API_BASE_URL}/movie/${movieId}/videos?api_key=${API_KEY}`);\n            const data = await response.json();\n            const trailer = data.results.find(video => video.site === 'YouTube' && video.type === 'Trailer');\n            const teaser = data.results.find(video => video.site === 'YouTube' && video.type === 'Teaser');\n            setVideoKey(trailer ? trailer.key : teaser ? teaser.key : null);\n        }\n\n        // Fetch movies with the same genre\n        async function fetchSameGenreMovies(genreId) {\n            const response = await fetch(`${API_BASE_URL}/discover/movie?api_key=${API_KEY}&with_genres=${genreId}`);\n            const data = await response.json();\n            setSameGenreMovies(data.results);\n        }\n\n        fetchMovieDetails();\n        fetchMovieVideo();\n    }, [movieId]);  // Re-run this effect when movieId changes\n\n    if (!movie) return <div>Loading...</div>;\n\n    return (\n        <div>\n            {/* Same Genre Movies */}\n            <div className={styles.group}>\n                <h2>{{ category }}</h2>\n                <div className={styles.movieContainer}>\n                    {sameGenreMovies.map(sameGenreMovie => (\n                        <div key={sameGenreMovie.id} className={styles.movieItem}>\n                            <img\n                                src={`https://image.tmdb.org/t/p/w200${sameGenreMovie.backdrop_path}`}\n                                alt={sameGenreMovie.title || sameGenreMovie.name}\n                            />\n                        </div>\n                    ))}\n                </div>\n            </div>\n\n            <div className={styles.movieDetails}>\n                <div className={styles.movieContent}>\n                    <h2>{movie.name || movie.title}</h2>\n                    <hr className={styles.line} />\n                    <p><strong>Release Date:</strong> {movie.release_date}</p>\n                    <p><strong>Rating:</strong> {movie.vote_average}</p>\n                    <p>{movie.overview}</p>\n                </div>\n\n                {/* Placeholder for the trailer */}\n                <div className={styles.movieTrailer}>\n                    <div className={styles.videoContainer}>\n                        {videoKey ? (\n                            <YouTube videoId={videoKey} opts={opts} />\n                        ) : (\n                            <img\n                                src={`https://image.tmdb.org/t/p/original${movie.backdrop_path}`}\n                                alt={movie.name}\n                                className={styles.movieBackdrop}\n                            />\n                        )}\n                    </div>\n                </div>\n\n            </div>\n        </div>\n    );\n}\n\nexport default MovieDetails;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}